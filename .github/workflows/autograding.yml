name: ğŸš€ Autograding - Collaborative Feature Implementation

on:  
  pull_request:  
    types:  
      - opened  
      - synchronize  

jobs:  
  grade:  
    runs-on: ubuntu-latest  

    steps:  

    # Step 1: Checkout the Repository
    - name: ğŸ“‚ Checkout Repository
      uses: actions/checkout@v3
      with:
        fetch-depth: 1

    # Step 2: Validate Feature Implementation
    - name: âœ… Validate Feature Files
      run: |  
        echo "ğŸ” Checking if 'feature1.js' contains the expected implementation..."
        if ! grep -q "function feature1" src/components/feature1.js; then  
          echo "âŒ 'feature1.js' does not contain the required 'function feature1' implementation!"
          exit 1  
        fi  

        echo "ğŸ” Checking if 'feature2.js' contains the expected implementation..."
        if ! grep -q "function feature2" src/components/feature2.js; then  
          echo "âŒ 'feature2.js' does not contain the required 'function feature2' implementation!"
          exit 1  
        fi  

        echo "âœ… Both 'feature1.js' and 'feature2.js' have the correct implementations!"

    # Step 3: Check for Merge Conflicts
    - name: ğŸš§ Merge Conflict Validation
      run: |  
        echo "ğŸ” Searching for merge conflict markers in 'feature1.js'..."
        if [ "$(grep -o '<<<<<<< HEAD' src/components/feature1.js | wc -l)" -gt 0 ]; then  
          echo "âŒ Merge conflicts detected in 'feature1.js'! Please resolve them before proceeding."
          exit 1  
        fi  

        echo "âœ… No merge conflicts detected in 'feature1.js'!"

    # Step 4: Final Feedback
    - name: ğŸ Complete Grading
      run: echo "ğŸ‰ Autograding complete! Great work! ğŸš€"
